(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue-cesium-viewer"]=t():e["vue-cesium-viewer"]=t()})("undefined"!==typeof self?self:this,(function(){return function(){"use strict";var e={};!function(){e.d=function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})}}(),function(){e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){e.p=""}();var t={};if(e.r(t),e.d(t,{Viewer:function(){return C},default:function(){return L}}),"undefined"!==typeof window){var i=window.document.currentScript,n=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(e.p=n[1])}var o=function(){var e=this,t=e._self._c;return t("div",{ref:"viewer",staticStyle:{width:"100%",height:"100%"}},[e._t("default")],2)},r=[];const a=Object.prototype.toString;function s(e){const t={}.toString.call(e);"[object Array]"===t?d(e):"[object Object]"===t&&l(e)}function d(e){for(let t=e.length-1;t>=0;t--)"object"===typeof e[t]&&s(e[t]);return 0===e.length}function l(e){for(const t in e)(null===e[t]||void 0===e[t]||"object"===typeof e[t]&&c(e[t]))&&delete e[t]}function c(e){if(u(e))return!0;if(e instanceof Element)return!1;const t=Object.keys(e);return 0===t.length}function u(e){return"undefined"===typeof e}function m(e){return"[object Array]"===a.call(e)}const h={"vc-viewer":["selectedEntityChanged","trackedEntityChanged"],"vc-primitive-tileset":["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],"vc-primitive-particle":["complete"],"viewer-property-events":[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],"viewer-mouse-events":["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],"imagery-layer-events":["errorEvent"],"entity-events":["definitionChanged"],"datasource-events":["changedEvent","errorEvent","loadingEvent"],"datasource-property-events":[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}],"mouse-events":["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"]};function v(e,t,i=!0){const n=t||h[this.$options.name];n&&n.forEach((t=>{if(e&&e[t]){const n=this?.$listeners?.[t],o=i?"addEventListener":"removeEventListener";n&&e[t][o](n.fns)}}))}var p={name:"y-viewer",props:{animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!1},sceneModePicker:{type:Boolean,default:!1},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},logo:{type:Boolean,default:!1},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YzVlMWU5Zi1mODcwLTQzZDEtYTYwOS1hM2IyOTZkOWJkNDkiLCJpZCI6NTgxMjQsImlhdCI6MTYyMjg3OTkyM30.O7_u_MGY66QR8oJOmr1xgKHN_sd3cD2zL195HV7fRu8"},camera:{type:Object,default:function(){return{position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0}}},viewerCreator:Function,autoSortImageryLayers:{type:Boolean,default:!0}},created(){Object.defineProperties(this,{dataSources:{enumerable:!0,get:()=>this.viewer&&this.viewer.dataSources},entities:{enumerable:!0,get:()=>this.viewer&&this.viewer.entities},imageryLayers:{enumerable:!0,get:()=>this.viewer&&this.viewer.imageryLayers},primitives:{enumerable:!0,get:()=>this.viewer&&this.viewer.scene.primitives},groundPrimitives:{enumerable:!0,get:()=>this.viewer&&this.viewer.scene.groundPrimitives},postProcessStages:{enumerable:!0,get:()=>this.viewer&&this.viewer.scene.postProcessStages}})},mounted(){this.load()},destroyed(){this.unload()},methods:{init(){const e=this.$refs.viewer,t=this.viewerOptions();window.Cesium.Ion.defaultAccessToken=this.accessToken;let i=this.viewerCreator?this.viewerCreator(this,e,t):new window.Cesium.Viewer(e,t);this.viewer=i,this.camera&&this.setCamera(this.camera),this.logo||(i.cesiumWidget.creditContainer.style.display="none"),window.Cesium.defined(i.animation)&&(i.animation.viewModel.dateFormatter=this.localeDateTimeFormatter,i.animation.viewModel.timeFormatter=this.localeTimeFormatter),window.Cesium.defined(i.timeline)&&(i.timeline.makeLabel=e=>this.localeDateTimeFormatter(e),i.timeline.zoomTo(i.clock.startTime,i.clock.stopTime)),i.widgetResizeed=new window.Cesium.Event,this.registerCameraChangedEvent(),this.registerEvents(!0);const n={viewer:i,vm:this};return this.$emit("ready",n),this._mounted=!0,n},viewerOptions(){let{animation:e,baseLayerPicker:t,fullscreenButton:i,geocoder:n,homeButton:o,infoBox:r,sceneModePicker:a,timeline:d,navigationHelpButton:l,navigationInstructionsInitiallyVisible:c}=this,u={animation:e,baseLayerPicker:t,fullscreenButton:i,geocoder:n,homeButton:o,infoBox:r,sceneModePicker:a,timeline:d,navigationHelpButton:l,navigationInstructionsInitiallyVisible:c};return s(u),u},setCamera(e){const{viewer:t}=this,i=e.position;i.lng&&i.lat?t.camera.setView({destination:window.Cesium.Cartesian3.fromDegrees(i.lng,i.lat,i.height||0,t.scene.globe.ellipsoid),orientation:{heading:window.Cesium.Math.toRadians(e.heading||360),pitch:window.Cesium.Math.toRadians(e.pitch||-90),roll:window.Cesium.Math.toRadians(e.roll||0)}}):i.x&&i.y&&i.z&&t.camera.setView({destination:new window.Cesium.Cartesian3(i.x,i.y,i.z),orientation:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}})},registerEvents(e){const{viewer:t}=this,i=e?"addEventListener":"removeEventListener";t.imageryLayers.layerAdded[i](this.layerAdded),v.call(this,t,void 0,e),h["viewer-property-events"].forEach((i=>{const n=m(i.name)&&t[i.name[0]]?t?.[i.name[0]]?.[i.name[1]]:t[i.name];n&&v.call(this,n,i.events,e)}));const n=new window.Cesium.ScreenSpaceEventHandler(t.canvas);h["viewer-mouse-events"].forEach((t=>{const i=this.$listeners[t];e?i&&n.setInputAction(i.fns,window.Cesium.ScreenSpaceEventType[t]):i&&n.removeInputAction(window.Cesium.ScreenSpaceEventType[t])}))},registerCameraChangedEvent(){const{viewer:e}=this,t=this.$listeners["update:camera"];t&&e.camera.changed.addEventListener((()=>{const i=e.camera.positionCartographic;let n;n=this.camera.position.lng?{position:{lng:window.Cesium.Math.toDegrees(i.longitude),lat:window.Cesium.Math.toDegrees(i.latitude),height:i.height},heading:window.Cesium.Math.toDegrees(e.camera.heading||360),pitch:window.Cesium.Math.toDegrees(e.camera.pitch||-90),roll:window.Cesium.Math.toDegrees(e.camera.roll||0)}:{position:{x:e.camera.position.x,y:e.camera.position.y,z:e.camera.position.z},heading:e.camera.heading||2*Math.PI,pitch:e.camera.pitch||-Math.PI/2,roll:e.camera.roll||0},t&&this.$emit("update:camera",n)}))},layerAdded(e){const{viewer:t,autoSortImageryLayers:i}=this;t.baseLayerPicker&&t.imageryLayers.raiseToTop(e),i&&(e.sortOrder=window.Cesium.defined(e.sortOrder)?e.sortOrder:9999,t.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),t.imageryLayers._update())},localeDateTimeFormatter(e,t,i){const{JulianDate:n}=window.Cesium;let o=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const r=n.toDate(e),a=r.toLocaleString("zh-hans",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),s=r.toLocaleString("zh-hans",{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return i||!t&&r.getHours()+r.getMinutes()!==0?i?`${a} ${o}`:`${s} ${a} ${o}`:s},localeTimeFormatter(e,t){return this.localeDateTimeFormatter(e,t,!0)},load(){if(this._mounted)return!1;this.beforeLoad(),this.init()},unload(){if(!this._mounted)return!1;this.registerEvents(!1);const{viewer:e}=this;e&&e.destroy(),this.viewer=void 0,this._mounted=!1,this.$listeners["destroyed"]&&this.$emit("destroyed",this)},reload(){this.unload(),this.load()},beforeLoad(){this.$listeners["beforeLoad"]&&this.$emit("beforeLoad")}}},f=p;function g(e,t,i,n,o,r,a,s){var d,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=d):o&&(d=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}var y=g(f,o,r,!1,null,"0fc5176f",null),w=y.exports;w.install=e=>{e.component(w.name,w)};var C=w;const E={Viewer:C},_=e=>{if(!_.installed){_.installed=!0;for(let t in E)e.use(E[t])}};var b={install:_},L=b;return t}()}));
//# sourceMappingURL=vue-cesium-viewer.umd.min.js.map