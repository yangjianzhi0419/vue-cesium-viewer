(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("Cesium")):"function"===typeof define&&define.amd?define(["Cesium"],t):"object"===typeof exports?exports["vue-cesium-viewer"]=t(require("Cesium")):e["vue-cesium-viewer"]=t(e["Cesium"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={89:function(t){t.exports=e}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}!function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p=""}();var o={};return function(){if(i.r(o),i.d(o,{Viewer:function(){return w},default:function(){return T}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(i.p=t[1])}var n=function(){var e=this,t=e._self._c;return t("div",{ref:"viewer",staticStyle:{width:"100%",height:"100%"}},[e._t("default")],2)},r=[],a=i(89);function s(e){const t={}.toString.call(e);"[object Array]"===t?l(e):"[object Object]"===t&&c(e)}function l(e){for(let t=e.length-1;t>=0;t--)"object"===typeof e[t]&&s(e[t]);return 0===e.length}function c(e){for(const t in e)(null===e[t]||void 0===e[t]||"object"===typeof e[t]&&d(e[t]))&&delete e[t]}function d(e){if(u(e))return!0;if(e instanceof Element)return!1;const t=Object.keys(e);return 0===t.length}function u(e){return"undefined"===typeof e}function m(e){return"[object Array]"===Object.prototype.toString.call(e)}const h={"vc-viewer":["selectedEntityChanged","trackedEntityChanged"],"vc-primitive-tileset":["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],"vc-primitive-particle":["complete"],"viewer-property-events":[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],"viewer-mouse-events":["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],"imagery-layer-events":["errorEvent"],"entity-events":["definitionChanged"],"datasource-events":["changedEvent","errorEvent","loadingEvent"],"datasource-property-events":[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}],"mouse-events":["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"]};function p(e,t,n=!0){const i=t||h[this.$options.name];i&&i.forEach((t=>{if(e&&e[t]){const i=this?.$listeners?.[t],o=n?"addEventListener":"removeEventListener";i&&e[t][o](i.fns)}}))}var v={name:"y-viewer",props:{animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!1},sceneModePicker:{type:Boolean,default:!1},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},logo:{type:Boolean,default:!1},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YzVlMWU5Zi1mODcwLTQzZDEtYTYwOS1hM2IyOTZkOWJkNDkiLCJpZCI6NTgxMjQsImlhdCI6MTYyMjg3OTkyM30.O7_u_MGY66QR8oJOmr1xgKHN_sd3cD2zL195HV7fRu8"},camera:{type:Object,default:function(){return{position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0}}},viewerCreator:Function,autoSortImageryLayers:{type:Boolean,default:!0}},mounted(){this.load()},destroyed(){this.unload()},methods:{init(){const e=this.$refs.viewer,t=this.viewerOptions();a.Ion.defaultAccessToken=this.accessToken;let n=this.viewerCreator?this.viewerCreator(this,e,t):new a.Viewer(e,t);this.viewer=n,this.camera&&this.setCamera(this.camera),this.logo||(n.cesiumWidget.creditContainer.style.display="none"),a.defined(n.animation)&&(n.animation.viewModel.dateFormatter=this.localeDateTimeFormatter,n.animation.viewModel.timeFormatter=this.localeTimeFormatter),a.defined(n.timeline)&&(n.timeline.makeLabel=e=>this.localeDateTimeFormatter(e),n.timeline.zoomTo(n.clock.startTime,n.clock.stopTime)),n.widgetResizeed=new a.Event,this.registerCameraChangedEvent(),this.registerEvents(!0);const i={viewer:n,vm:this,cesium:a};return this.$emit("ready",i),this._mounted=!0,i},viewerOptions(){let{animation:e,baseLayerPicker:t,fullscreenButton:n,geocoder:i,homeButton:o,infoBox:r,sceneModePicker:a,timeline:l,navigationHelpButton:c,navigationInstructionsInitiallyVisible:d}=this,u={animation:e,baseLayerPicker:t,fullscreenButton:n,geocoder:i,homeButton:o,infoBox:r,sceneModePicker:a,timeline:l,navigationHelpButton:c,navigationInstructionsInitiallyVisible:d};return s(u),u},setCamera(e){const{viewer:t}=this,n=e.position;n.lng&&n.lat?t.camera.setView({destination:a.Cartesian3.fromDegrees(n.lng,n.lat,n.height||0,t.scene.globe.ellipsoid),orientation:{heading:a.Math.toRadians(e.heading||360),pitch:a.Math.toRadians(e.pitch||-90),roll:a.Math.toRadians(e.roll||0)}}):n.x&&n.y&&n.z&&t.camera.setView({destination:new a.Cartesian3(n.x,n.y,n.z),orientation:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}})},registerEvents(e){const{viewer:t}=this,n=e?"addEventListener":"removeEventListener";t.imageryLayers.layerAdded[n](this.layerAdded),p.call(this,t,void 0,e),h["viewer-property-events"].forEach((n=>{const i=m(n.name)&&t[n.name[0]]?t?.[n.name[0]]?.[n.name[1]]:t[n.name];i&&p.call(this,i,n.events,e)}));const i=new a.ScreenSpaceEventHandler(t.canvas);h["viewer-mouse-events"].forEach((t=>{const n=this.$listeners[t];e?n&&i.setInputAction(n.fns,a.ScreenSpaceEventType[t]):n&&i.removeInputAction(a.ScreenSpaceEventType[t])}))},registerCameraChangedEvent(){const{viewer:e}=this,t=this.$listeners["update:camera"];t&&e.camera.changed.addEventListener((()=>{const n=e.camera.positionCartographic;let i;i=this.camera.position.lng?{position:{lng:a.Math.toDegrees(n.longitude),lat:a.Math.toDegrees(n.latitude),height:n.height},heading:a.Math.toDegrees(e.camera.heading||360),pitch:a.Math.toDegrees(e.camera.pitch||-90),roll:a.Math.toDegrees(e.camera.roll||0)}:{position:{x:e.camera.position.x,y:e.camera.position.y,z:e.camera.position.z},heading:e.camera.heading||2*Math.PI,pitch:e.camera.pitch||-Math.PI/2,roll:e.camera.roll||0},t&&this.$emit("update:camera",i)}))},layerAdded(e){const{viewer:t,autoSortImageryLayers:n}=this;t.baseLayerPicker&&t.imageryLayers.raiseToTop(e),n&&(e.sortOrder=a.defined(e.sortOrder)?e.sortOrder:9999,t.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),t.imageryLayers._update())},localeDateTimeFormatter(e,t,n){const{JulianDate:i}=a;let o=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const r=i.toDate(e),s=r.toLocaleString("zh-hans",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=r.toLocaleString("zh-hans",{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!t&&r.getHours()+r.getMinutes()!==0?n?`${s} ${o}`:`${l} ${s} ${o}`:l},localeTimeFormatter(e,t){return this.localeDateTimeFormatter(e,t,!0)},load(){if(this._mounted)return!1;this.beforeLoad(),this.init()},unload(){if(!this._mounted)return!1;this.registerEvents(!1);const{viewer:e}=this;e&&e.destroy(),this.viewer=void 0,this._mounted=!1,this.$listeners["destroyed"]&&this.$emit("destroyed",this)},reload(){this.unload(),this.load()},beforeLoad(){this.$listeners["beforeLoad"]&&this.$emit("beforeLoad")}}},f=v;function y(e,t,n,i,o,r,a,s){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var g=y(f,n,r,!1,null,"8ba3f19a",null),C=g.exports;C.install=e=>{e.component(C.name,C)};var w=C;const E={Viewer:w},_=e=>{if(!_.installed){_.installed=!0;for(let t in E)e.use(E[t])}};var L={install:_},T=L}(),o}()}));
//# sourceMappingURL=vue-cesium-viewer.umd.min.js.map